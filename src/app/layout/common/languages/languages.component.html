<!-- Current language -->
<button mat-icon-button [matMenuTriggerFor]="languages" class="bg-nightBlue-500 px-2 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
    <ng-container *ngTemplateOutlet="flagImage; context: {$implicit: translate.currentLang}"></ng-container>
</button>

<!-- Dropdown menu -->
<mat-menu [xPosition]="'before'" #languages="matMenu">
    <ng-container *ngFor="let lang of translate.getLangs(); trackBy: trackByFn">
        <button mat-menu-item (click)="setActiveLang(lang)">
            <span class="flex items-center">
                <ng-container *ngTemplateOutlet="flagImage; context: {$implicit: lang}"></ng-container>
                <span class="ml-3">{{lang.toUpperCase()}}</span>
            </span>
        </button>
    </ng-container>
</mat-menu>

<!-- Flag image template -->
<ng-template let-lang #flagImage>
    <span class="relative w-6 shadow rounded-sm overflow-hidden">
        <span class="absolute inset-0 ring-1 ring-inset ring-black ring-opacity-10"></span>
        <img class="w-full" [src]="'assets/images/flags/' + lang.toUpperCase() + '.svg'"
            [alt]="'Flag image for ' + lang">
    </span>
</ng-template>